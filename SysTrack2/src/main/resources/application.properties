# ===================== App =====================
spring.application.name=SysTrack2

# Porta: usa $PORT do Azure (fallback 8080 local)
server.port=${PORT:8080}

# Respeitar X-Forwarded-* do App Service (URLs corretas atrás do proxy)
server.forward-headers-strategy=framework

# ===================== DataSource (Azure SQL) =====================
# Conexão direta para Azure SQL Database
spring.datasource.url=jdbc:sqlserver://systrack-sql-001.database.windows.net:1433;database=SysTrackDB;encrypt=true;trustServerCertificate=false;loginTimeout=30;

# Usuario precisa ser no formato user@server
spring.datasource.username=sqladminuser@systrack-sql-001
spring.datasource.password=asuling1i-das7b3
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Pool Hikari (ajuste conforme o plano do App Service)
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:2}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT_MS:30000}
spring.datasource.hikari.validation-timeout=${DB_VALIDATION_TIMEOUT_MS:5000}

# ===================== JPA/Hibernate =====================
spring.jpa.show-sql=true
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# ===================== Flyway (opcional) =====================
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# ===================== Logging =====================
logging.file.name=
logging.pattern.level=%5p
